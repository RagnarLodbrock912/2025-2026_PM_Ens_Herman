dictionary = {'to': 54, 'o ': 66, ' s': 107, 'sh': 15, 'he': 130, 'er': 98, 'rl': 9, 'lo': 16, 'oc': 10, 'ck': 8, 'k ': 13, ' h': 134, 'ho': 45, 'ol': 16, 'lm': 7, 'me': 46, 'es': 57, 
's ': 142, 'e ': 250, ' i': 127, 'is': 65, ' a': 177, 'al': 32, 'lw': 3, 'wa': 31, 'ay': 9, 'ys': 6, ' t': 178, 'th': 147, ' w': 99, 'wo': 14, 'om': 31, 'ma': 34, 'an': 91, 'n.': 11, '. ': 59, 'i ': 43, 'ha': 73, 'av': 20, 've': 56, 'se': 59, 'el': 34, 'ld': 14, 'do': 21, 'm ': 16, 'ea': 30, 'ar': 56, 'rd': 10, 'd ': 140, 'hi': 69, 'im': 20, ' m': 72, 'en': 71, 'nt': 43, 'ti': 42, 'io': 23, 'on': 63, 'n ': 96, 'r ': 59, ' u': 20, 'un': 13, 'nd': 76, 'de': 27, 'ny': 4, 'y ': 78, ' o': 95, 'ot': 27, ' n': 26, 
'na': 11, 'am': 14, 'e.': 10, 'in': 118, ' e': 36, 'ey': 9, 'ye': 8, 'ec': 11, 'cl': 10, 'li': 26, 'ip': 1, 'ps': 3, ' p': 40, 'pr': 14, 're': 87, 'ed': 69, 'mi': 14, 'at': 62, 'te': 56, 'wh': 29, 'le': 42, 'of': 53, 'f ': 58, 'ex': 11, 'x.': 1, 'it': 70, 't ': 125, 'as': 55, 'no': 25, ' f': 41, 'fe': 6, 'lt': 5, 'em': 20, 'mo': 16, 'ak': 6, 'ki': 3, ' l': 29, 'ov': 6, 'fo': 15, 'or': 42, 'ir': 14, 'ne': 41, 'ad': 26, 'dl': 6, 'r.': 8, 'll': 29, 'l ': 25, 'ns': 23, 's,': 17, ', ': 99, 'pa': 18, 'rt': 7, 'ic': 32, 'cu': 8, 'ul': 23, 'la': 20, 'ly': 33, 'y,': 8, 'we': 22, 'ab': 10, 'bh': 1, 'rr': 3, ' c': 47, 'co': 18, 'd,': 12, 'ci': 12, ' b': 58, 'bu': 13, 'ut': 17, 'dm': 3, 
'ra': 19, 'bl': 13, 'ba': 5, 'nc': 14, 'ce': 34, 'd.': 11, 'ta': 14, 'ke': 17, 't,': 11, 'os': 10, 'st': 47, 'pe': 20, 'rf': 1, 'ct': 16, ' r': 30, 'so': 23, 'ni': 10, 'ng': 39, 'g ': 28, 'ob': 10, 'bs': 8, 'rv': 10, 'vi': 7, 'ac': 24, 'ch': 29, 'ee': 34, 'n,': 9, 'a ': 46, 'ou': 79, 'pl': 10, 'ms': 9, 'lf': 10, 'fa': 9, 'ls': 1, 'po': 20, 
'si': 28, 'ev': 10, 'sp': 7, 'ok': 5, 'ft': 5, 'ss': 23, 'sa': 11, 'wi': 23, 'h ': 38, ' g': 13, 'gi': 9, 'ib': 3, 'be': 32, 'sn': 1, 'gs': 3, 'r—': 2, '—e': 1, 'xc': 1, ' d': 46, 'dr': 9, 'aw': 5, ' v': 8, 'ei': 7, 'il': 14, 'fr': 12, 'ro': 37, 'n’': 4, '’s': 2, 'iv': 12, 's.': 14, 'tr': 24, 'ai': 20, 'su': 14, 'uc': 13, 'ru': 8, 'us': 18, 'ow': 35, 'wn': 11, 'ca': 20, 'fi': 11, 'dj': 1, 'ju': 4, 'mp': 10, 'od': 8, 'du': 8, 'di': 10, 'ig': 18, 'gh': 16, 'ht': 11, 'hr': 6, 'w ': 23, 'ub': 4, 'bt': 1, 'up': 16, 'ts': 11, 'gr': 1, 'ri': 29, 'um': 4, 'cr': 8, 'h-': 1, '-p': 1, 'tu': 11, 'ur': 28, 'rb': 2, 'bi': 4, ' y': 44, 'et': 22, 'm,': 2, 'r,': 9, ' q': 3, 'qu': 7, 'ue': 7, 
'ry': 13, 'y.': 5, '.\n': 8, '\n\n': 27, '\ni': 4, 'tt': 14, 'tl': 10, 'my': 21, 'ia': 7, 'ag': 13, 'ge': 15, 'if': 9, 'ap': 9, 'pp': 2, 'pi': 5, 'e-': 1, '-c': 2, 'p ': 7, 'rs': 12, 'ds': 5, 'hm': 1, 'uf': 1, 'ff': 6, 'ie': 15, 'b ': 1, 'oa': 1, 'rm': 6, 'ty': 3, 'bo': 5, 'oh': 1, 'l,': 5, 'dg': 2, 'oo': 15, 'ks': 2, 'rn': 7, 'ek': 2, 'tw': 5, 'mb': 5, 'ws': 1, 'ug': 8, 'g,': 5, 'rc': 2, 'rg': 3, 'gy': 1, ' k': 10, 'ep': 6, 'by': 6, 'ud': 5, 'dy': 3, 'e,': 17, 'cc': 6, 'mm': 2, 'xt': 3, 'ao': 2, 'va': 3, 'lu': 2, 'op': 5, 'gu': 4, 'oi': 3, 's:': 1, ': ': 1, 'mu': 5, 'tk': 1, 'br': 2, 'sf': 1, 'fu': 4, 'gn': 4, 'yo': 42, 'da': 7, 'kn': 7, 'ew': 6, '\no': 1, 't—': 1, '—i': 2, 
'h,': 1, ' 1': 1, '18': 1, '88': 2, '8—': 1, ' j': 5, 'jo': 1, ' (': 1, '(f': 1, 'e)': 1, '),': 1, 't.': 10, 'l-': 1, '-r': 1, 'rk': 9, 'id': 11, 'sc': 5, 'iz': 1, 'ze': 1, 'ga': 8, 'oy': 2, 'yi': 2, 'p,': 2, 'lh': 1, 'sw': 3, 'nk': 4, 'eh': 1, 'm.': 3, 'nn': 2, 'g-': 1, '\nh': 2, 'ef': 6, 's;': 1, '; ': 2, 'gl': 2, 'k,': 4, 'mc': 2, 'og': 
2, '\n“': 19, '“w': 4, 'ui': 5, 'u,': 1, ',”': 12, '” ': 17, ' “': 17, '“i': 7, 'u ': 29, 'pu': 1, 'u.': 1, '.”': 14, '”\n': 19, '“s': 2, 'n!': 1, '!”': 1, 'fl': 3, 'cy': 
1, 'go': 4, '“t': 8, 'w?': 1, '?”': 6, 'sy': 1, 'l?': 1, '“m': 2, 'i,': 1, 'h.': 1, 'nl': 1, 'o.': 1, 'lk': 2, 'hu': 3, 'sd': 1, 'df': 1, '’t': 2, 'ja': 1, 'kl': 1, 'bb': 
1, 'vo': 2, 'f,': 2, 'e;': 1, 'oe': 1, 'ik': 1, 'ix': 1, 'x ': 1, 'bv': 1, 'sl': 5, 'au': 3, 'eo': 4, 't-': 1, '-s': 1, 'sm': 3, 'lv': 1, 'lg': 1, 'p-': 1, '-h': 1, 'lp': 1, 'xp': 3, 'af': 2, '“q': 2, 'o,': 3, '“y': 1, 'xa': 3, 'eq': 2, '“f': 1, '“h': 2, 'n?': 1, 'e?': 1, 'y?': 1, '? ': 1, 'w.': 1, 'o!': 1, '! ': 1, 'w,': 1, 'k-': 1, '-t': 
1, '“r': 1, '\nt': 1, 'dd': 1, 'o-': 1, '-n': 1, 'ua': 2, 'o’': 1, '’c': 1, '“a': 1, 'ya': 1, 'eu': 1, 'gg': 1, 'sk': 1, 'k.': 1, 's?': 1, 'a.': 1, 'eg': 1, 'f.': 2, 't?': 1, 'wr': 3, '“p': 2, '—t': 1, 'l.': 1, '“e': 1, 'e”': 1, '“g': 2, 'g”': 1, 't”': 1}

class Node:
    def __init__(self, value, weight):
        self.value = value
        self.weight = weight
        self.left = None
        self.right = None
        self.code = ""
        
arr = list()

for el in dictionary.keys():
    arr.append(Node(el, dictionary[el]))

while len(arr) > 1:
    arr.sort(key = lambda a: a.weight, reverse=True)
    new_node = Node("", arr[-1].weight + arr[-2].weight)
    new_node.left = arr[-1]
    new_node.right = arr[-2]

    arr.pop()
    arr.pop()
    arr.append(new_node)

tree = arr[0]
codes = {}

def dfs(p, code):
    if p.left is None and p.right is None:
        codes[p.value] = code

    if p.left is not None:
        dfs(p.left, code + "0")

    if p.right is not None:
        dfs(p.right, code + "1")


dfs(tree, "")


filename = "text.txt"
with open(filename, "r", encoding='utf-8') as f:
    text = f.read()
    text = text.lower()

print(codes)
encoded = list()

for i in range(len(text) - 2):
    encoded.append(codes[text[i] + text[i + 1]])

print(encoded)

import math

# ===== BASIC DATA =====
text_len = len(text)
alphabet_size = len(set(text))
freq_dict = dictionary

# ===== Shannon entropy =====
total_freq = sum(freq_dict.values())
entropy = 0
for f in freq_dict.values():
    p = f / total_freq
    entropy += -p * math.log2(p)

shannon_bits = entropy * total_freq

# ===== Huffman coding =====
huffman_bits = 0
for symbol, freq in freq_dict.items():
    huffman_bits += freq * len(codes[symbol])

# ===== Uniform coding =====
uniform_bits_per_symbol = math.ceil(math.log2(alphabet_size))
uniform_bits = total_freq * uniform_bits_per_symbol

# ===== ASCII =====
ascii_bits = total_freq * 8

# ===== OUTPUT =====
print("\n" + "="*50)
print("HUFFMAN AND INFORMATION COMPARISON")
print("="*50)

print(f"Text length (symbols): {text_len}")
print(f"Alphabet size: {alphabet_size}")
print(f"Total frequency count: {total_freq}")
print(f"Shannon entropy (H): {entropy:.4f} bits per symbol")
print(f"Total information according to Shannon (I = H*N): {shannon_bits:.0f} bits")

print("\n--- ASCII ---")
print(f"Bits per symbol: 8")
print(f"Total bits: {ascii_bits}")

print("\n--- Uniform coding ---")
print(f"Bits per symbol: {uniform_bits_per_symbol}")
print(f"Total bits: {uniform_bits}")

print("\n--- Huffman coding ---")
print(f"Total bits: {huffman_bits}")

print("\n" + "="*50)